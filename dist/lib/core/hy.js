define(function(require,exports,module){function o(o){if(o=o||i.getDist(),!$.isPlainObject(o))return e.error("HY/module_bind:","Can't find the matching route rule for this hash!");if(o.isRoot&&n.config.route.root&&(o=n.config.route.root),o.module===n.route.now.module&&o.action===n.route.now.action&&!o.options.reload)return!1;if(o.module!==n.route.now.module)require.async(""+o.module,function(module){o.exports=module,o.hash=location.hash,$(n.moduleEventDom).remove(),$(n.rootDom).append('<section id="'+n.moduleEventDom.split("#")[1]+'"></section>');var t=n.route.refer=$.extend({},n.route.now),i=n.route.now=o;return t.exports&&($.isFunction(t.exports[t.action+"_destroy"])&&t.exports[t.action+"_destroy"](),$.isFunction(t.exports._destroy)&&t.exports._destroy()),$.isFunction(i.exports._init)&&i.exports._init(),$.isFunction(i.exports[i.action+"_init"])&&i.exports[i.action+"_init"](),e.log("HY/module_ready",i.module+"->"+i.action),module[i.action]?void module[i.action]():e.error("HY/module_bind:","Unknown module/action ["+i.module+"/"+i.action+"]!")});else{var t=n.route.now;if(t.action=o.action,t.params=o.params,$.isFunction(t.exports[t.action+"_destroy"])&&t.exports[t.action+"_destroy"](),$.isFunction(t.exports[t.action+"_init"])&&t.exports[t.action+"_init"](),e.log("HY/action_change",t.module+"->"+t.action),!t.exports[t.action])return e.error("HY/module_bind:","Unknown module/action ["+t.module+"/"+t.action+"]!");t.exports[t.action]()}}function t(t,r,u){function s(){i.init(o)}return t&&$(t).size()?(n.rootDom=t,$.isPlainObject(r)?n.config=$.extend(!0,{},n.config,r):$.isFunction(r)&&(u=r),void($.isFunction(u)?u(require,s):s())):e.error("HY/hy_init:","Root dom is not fund!")}module.exports={init:t};var n={config:{route:{root:{}}},rootDom:"",moduleEventDom:"#hy_module_event",route:{refer:{exports:""},now:{exports:""},customRules:[]}};window.HY||(window.HY=n);var e=require("./base"),i=require("route");require("url")});