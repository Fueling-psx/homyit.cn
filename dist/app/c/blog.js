define(function(require,exports,module){var t=(require("event"),require("route")),i=require("../m/blog"),e=require("../v/tpl_blog"),n=require("../c/blogTools");exports._init=function(){var t=e.body(),r=require("/public/css/css_blog"),o=require("../v/tpl_nav").navTop(),c=require("/public/css/css_nav"),a=require("/public/js/navTop"),s=(require("/public/js/blog").init(),require("v/tpl_footer").footer()),l=require("/public/css/css_footer");require("/public/js/anli");$(HY.rootDom).html(c+o+r+t+l+s),a.navInit("hide"),i.getTopicList(function(t){i.getUserList(function(e){t=t.sort(function(t,i){return t.priority-i.priority}),arrTopics=[],t.forEach(function(t){arrTopic=[],0==t.pid&&(arrTopic.push(t.name),arrTopic.push(t.id),arrTopics.push(arrTopic))}),i.getDetails(function(t){n.articleSort(t,"create_time","desc",function(t){n.articleCut(t,200,function(t){n.timeToStr(t,function(t){n.isStrCut(t,"title",8,function(t){for(var i=[],n=0;n<5&&n<t.length;n++){var r=[];r.push(t[n].title),r.push(t[n].create_time),r.push(t[n].id),i.push(r)}var o=require("../v/tpl_navSide").navSide({topicList:arrTopics,userList:e,arrTitle:i}),c=require("/public/css/css_navSide");require("/public/js/navSide")._init();$(".rightNav").html(c+o)})})})})})})})},exports.init=function(){i.getDetails(function(t){n.articleSort(t,"create_time","desc",function(t){n.articleCut(t,200,function(t){n.timeToStr(t,function(t){n.isStrCut(t,"title",10,function(t){n.isStrCut(t,"content",200,function(t){$(".navLeft").html(""),$("#article").html(e.article({details:t}));var i=Math.ceil(t.length/5);$(".navFooter").html(e.navFooter({pageSum:i}))})})})})})})},exports.articleList=function(){var r=t.getParams("topicId")-0,o=t.getParams("indexId")-0;if(r){var c=r,a="category_id";n.getNavLeft(r,o)}else if(o){var c=o,a="index_id";n.getNavLeft(r,o)}else{var c=t.getParams("userId")-0,a="user_id";$(".navLeft").html("")}i.getDetails(function(t){n.articleSort(t,"create_time","desc",function(t){n.getDetailsByField(t,a,c,function(t){n.articleCut(t,200,function(t){n.timeToStr(t,function(t){n.isStrCut(t,"title",10,function(t){n.isStrCut(t,"content",200,function(t){$("#article").html(e.article({details:t}));var i=Math.ceil(t.length/5);$(".navFooter").html(e.navFooter({pageSum:i}))})})})})})})})}});